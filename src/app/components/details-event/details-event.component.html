<div class="container">
  <div class="row">
    <div class="col-2  mt-3">
      <button class="btn bouton-retour" (click)="back()"><i class="bi bi-chevron-left"></i> {{ 'common.retour' | translate }} </button>
    </div>
    <div class="col-10">
      <app-titre [libelle]="event.libelle + ' ('+ event.date_evenement +') ' "></app-titre>
    </div>
  </div>


  <div class="row mt-5">
    <div class="col-3"> {{ 'page.details_event.personne_presente' | translate }} : <span
        [ngStyle]="{'color': secondaryColor }">{{ personneAssistes.length + toutPersonneInvite.length }}</span>
    </div>
    <div class="col-3"> {{ 'page.details_event.personne_absente' | translate }} : <span
        [ngStyle]="{'color': secondaryColor }"> {{ personneNonAssistes.length + toutPersonneInviteAbsent.length }}</span>
    </div>

    <div class="col-3"> </div>

  </div>
  <hr />

  <div class="row">
    <div class="col-sm-12 col-md-6">
      <table class="table table-striped">
        <tbody>
          <tr>
            <td> {{ "page.details_event.evenement" | translate }} </td>
            <td class="value-event">{{ event.libelle }} </td>
          </tr>
          <tr>
            <td> {{ "page.details_event.predicateur" | translate }} </td>
            <td class="value-event"> {{ event.predicateur }} </td>
          </tr>
          <tr>
            <td> {{ "page.details_event.titre_message" | translate }} </td>
            <td class="value-event"> {{ event.titre_message }} </td>
          </tr>
          <tr>
            <td> {{ "page.details_event.date_event" | translate }} </td>
            <td class="value-event"> {{ event.date_evenement }} </td>
          </tr>
          <tr>
            <td> {{ "page.details_event.heure_event" | translate }} </td>
            <td class="value-event"> {{ event.heure_evenement }} </td>
          </tr>

        </tbody>
      </table>
    </div>

     <div class="col-sm-12 col-md-12">

      <div class="row">


      <div class="accordion" id="accordionExample">
        <div class="accordion-item">
          <h2 class="accordion-header" id="headingOne">
            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne"
              aria-expanded="true" aria-controls="collapseOne">
              {{ 'page.details_event.personne_presente' | translate }} ({{ personneAssistesRecherche.length + personnesInviteRecherche.length}})
            </button>
          </h2>
          <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne"
            data-bs-parent="#accordionExample">
            <div class="accordion-body">

              <div class="row">
                <div class="mb-4 col-12">
                  <input type="text" class="form-control"
                    placeholder="{{ 'page.liste_personnes.rechercher' | translate}}" [(ngModel)]="recherchePresent">
                </div>
              </div>

              <table class="table table-striped" *ngIf="personneAssistesRecherche.length > 0 || personnesInviteRecherche.length > 0">
                <tbody>
                  <tr *ngFor="let personne of personneAssistesRecherche">
                    <td>
                      <span> {{ personne.prenom + ' '+ personne.nom }} </span>
                      <small class="gr-libelle">{{ personne.gr.libelle }}</small>

                    </td>
                  </tr>

                  <tr *ngFor="let personne of personnesInviteRecherche">
                    <td>
                      <span> {{ personne.nom }} </span>
                      <small class="gr-libelle">{{ personne.gr.libelle }}</small>

                    </td>
                  </tr>
                </tbody>
              </table>

              <div class="text-center fst-italic" *ngIf="personneAssistes.length == 0"> {{ 'page.details_event.aucun_participant' | translate |
                translate}}
              </div>

            </div>
          </div>
        </div>


        <br />

        <div class="accordion-item">
          <h2 class="accordion-header" id="headingTwo">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
              data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
              {{ 'page.details_event.personne_absente' | translate }} ({{personneNonAssistesRecherche.length + personnesInviteAbsentRecherche.length}})
            </button>
          </h2>
          <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo"
            data-bs-parent="#accordionExample">
            <div class="accordion-body">

              <div class="row">
                <div class="mb-4 col-12">
                  <input type="text" class="form-control"
                    placeholder="{{ 'page.liste_personnes.rechercher' | translate}}" [(ngModel)]="rechercheAbsent">
                </div>
              </div>

              <table class="table table-striped" *ngIf="personneNonAssistes.length > 0">
                <tbody>
                  <tr *ngFor="let personne of personneNonAssistesRecherche">
                    <td>
                      <span> {{ personne.prenom + ' '+ personne.nom }} </span>
                      <small class="gr-libelle">{{ personne.gr.libelle }}</small>
                    </td>
                  </tr>

                  <tr *ngFor="let personne of personnesInviteAbsentRecherche">
                    <td>
                      <span> {{ personne.nom }} </span>
                      <small class="gr-libelle">{{ personne.gr.libelle }}</small>
                    </td>
                  </tr>
                </tbody>
              </table>
              <div class="text-center fst-italic" *ngIf="personneNonAssistes.length == 0"> {{
                'page.details_event.aucun_absent' | translate}} </div>

            </div>
          </div>
        </div>

        <br />
        <app-participant [invites]="personnesInvite" [personnes]="personneGr" (changerPresence)="changerPresence($event)"></app-participant>


      </div>


    </div>
    </div>
  </div>

  <div class="alert alert-success alert-dismissible mt-2" *ngIf="!error && saved">
    {{ 'common.saved_success_message' | translate }}
  </div>

  <div class="alert alert-success alert-dismissible mt-2" *ngIf="!error && validated">
    {{ 'common.valider_success_message' | translate }}
  </div>

  <div class="alert alert-danger alert-dismissible mt-2" *ngIf="error">
    {{ 'common.error_message' | translate }}
  </div>

  <button class="btn btn-secondary me-2 mt-2" (click)="enregistrerParticipant()">{{ 'common.enregistrer' | translate }}</button>
  <hr>
  <!-- <button class="btn btn-light bouton-light" (click)="back()">{{ 'common.annuler' | translate }}</button> -->
  <app-rapport (generer)="genererRapport()" [rapport]="rapport" [buttonLibelle]="'afficher_rapport'"></app-rapport>


</div>

